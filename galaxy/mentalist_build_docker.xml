<tool id="mentalist_build_docker" name="MentaLiST Build DB (Docker)" version="0.1.0">
    <requirements>
        <container type="docker">dfornika/mentalist</container>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
    JULIA_PKGDIR=/usr/local/julia/share/julia/site
    HOME=/tools/MentaLiST
    julia
    '/tools/MentaLiST/src/MentaLiST.jl'
    build_db
    --db '$kmer_database'
    -k '$kmer_size'
    ${" ".join(map(str, $input_fastas))}
    ]]></command>
    <inputs>
      <param name="kmer_size" type="integer"
	     label="Kmer size" help="Kmer size"
	     value="31" min="1" max="32" />
      <param name="input_fastas" type="data_collection" collection_type="list" format="fasta" multiple="true"
	     label="Input Fasta" help="Fasta input files" />
    </inputs>
    <outputs>
      <data name="kmer_database" format="h5" />
    </outputs>
    <help><![CDATA[
    usage: MentaLiST.jl build_db --db DB -k K [-h] files...

    positional arguments:
    files       Fasta files with the MLST scheme

    optional arguments:
    --db DB     Output file (kmer database)
    -k K        Kmer size (type: Int8)
    -h, --help  show this help message and exit
    ]]></help>
    <citations>
      <citation></citation>
    </citations>
</tool>
