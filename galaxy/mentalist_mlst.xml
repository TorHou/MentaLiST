<tool id="mentalist_mlst" name="MentaLiST MLST Analysis" version="0.0.0">
    <command detect_errors="exit_code"><![CDATA[
    julia
    '$__tool_directory__/MentaLiST.jl'
    -o '$output_file'
    -s '$sample_name'
    --db '$kmer_db'
    #if $discard_threshold
    -t '$discard_threshold'
    #end if
    #if $quick_filter
    '$quick_filter'
    #end if
    #if $external_counter
    '$external_counter'
    #end if
    $input_fastqs.forward $input_fastqs.reverse
    ]]></command>
    <inputs>
      <param name="sample_name" type="text"
	     label="Sample Name" help="Sample Name" />
      <param name="kmer_db" type="data" format="H5"
	     label="Kmer DB" help="Kmer database" />
      <param name="discard_threshold" type="float"
	     label="Discard Threshold" help="A read of length L is discarded if it has at less than (L - k) * t hits to the same locus in the kmer database, where k is the kmer length. 0 &lt;= t &lt;= 1"
	     value="0.3" min="0" max="1" />
      <param name="quick_filter" type="boolean"
	     label="Quick Filter" help="Quick filter; if the first, middle and last kmers of a read are not in the kmer DB, the read is discarded. Disabled by default."
	     truevalue="-q" falsevalue="" optional="true" />
      <param name="external_counter" type="boolean"
	     label="External Kmer Counter" help="Use external kmc kmer counter. Disabled by default."
	     truevalue="-e" falsevalue="" optional="true" />
      <param name="input_fastqs" type="data_collection" collection_type="paired" format="fastq"
	     label="Input FastQ" help="FastQ input files" />
    </inputs>
    <outputs>
      <data name="output_file" format="tsv"/>
    </outputs>
    <help><![CDATA[
    usage: MentaLiST.jl -o O -s S --db DB [-t T] [-q] [-e] [-h] files...

    positional arguments:
    files       FastQ input files

    optional arguments:
    -o O        Output file with MLST call
    -s S        Sample name
    --db DB     Kmer database
    -t T        A read of length L is discarded if it has at less than
                (L - k) * t hits to the same locus in the kmer database,
		where k is the kmer length. 0 <= t <= 1 (type: Float64,
		default: 0.3
    -q          Quick filter; if the first, middle and last kmers of a
                read are not in the kmer DB, the read is discarded.
		Disabled by default.
    -e          Use external kmc kmer counter. Disabled by default.
    -h, --help  show this help message and exit
    ]]></help>
    <citations>
      <citation></citation>
    </citations>
</tool>
