<tool id="mentalist_build" name="MentaLiST Build DB" version="0.1.2">
    <command detect_errors="exit_code"><![CDATA[
    MentaLiST.jl
    build_db
    --db '$kmer_database'
    -k '$kmer_size'
    #if $profile
    -p '$profile'
    #end if
    -f ${" ".join(map(str, $input_fastas))}
    ]]></command>
    <inputs>
      <param name="kmer_size" type="integer"
	     label="Kmer size" help="Kmer size"
	     value="31" min="1" max="32" />
      <param name="input_fastas" type="data_collection" collection_type="list" format="fasta" multiple="true"
	     label="Input Fasta" help="Fasta input files" />
      <param name="profile" type="data" format="tsv" optional="true"
	     label="Profile" help="Profile for known genotypes" />
    </inputs>
    <outputs>
      <data name="kmer_database" format="h5" />
    </outputs>
    <help><![CDATA[
    usage: mentalist build_db --db DB -k K -f FASTA_FILES [FASTA_FILES...] [-p PROFILE] [-h]

    mandatory arguments:
    --db DB               Output file (kmer database)
    -k K                  Kmer size (type: Int8)
    -f, --fasta_files FASTA_FILES [FASTA_FILES...]
                          Fasta files with the MLST scheme

    optional arguments:
    -p, --profile PROFILE
                          Profile file for known genotypes.
    -h, --help            show this help message and exit
    ]]></help>
    <citations>
      <citation></citation>
    </citations>
</tool>
